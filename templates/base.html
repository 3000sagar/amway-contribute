{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">

    {% block meta %}
    <meta name="description" content="Amway premium products – Nutrition, Beauty, Personal Care.">
    <meta name="keywords" content="Amway, Nutrilite, Amway Products">
    {% endblock %}

    <title>Amway Contribute</title>

    <link rel="icon" href="{% static 'images/amway_logo.png' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tailwind config MUST be before the CDN -->
    <script>
    tailwind.config = {
        darkMode: "class",
        theme: { extend: {} }
    }
    </script>

    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

    <style>
    .switch {
        width: 50px; height: 26px;
        background: #d1d5db;
        border-radius: 9999px;
        position: relative;
        cursor: pointer;
        transition: .3s;
    }
    .switch::after {
        content:"";
        width:22px; height:22px;
        background:white;
        border-radius:50%;
        position:absolute;
        top:2px; left:2px;
        transition:.3s;
    }
    .switch.dark-mode { background:#4b5563; }
    .switch.dark-mode::after { transform:translateX(24px); background:#1f2937; }

    @keyframes slideDown {
      0% { opacity:0; transform:translateY(-10px) scale(0.97); }
      100% { opacity:1; transform:translateY(0) scale(1); }
    }
    .animate-slideDown { animation: slideDown .35s ease-out; }
    </style>

</head>

<body class="bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-200 transition-all duration-500">

<!-- HEADER -->
<header class="w-full bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-50">
    <div class="max-w-[1300px] mx-auto px-4 py-3 flex items-center justify-between">

        <!-- Logo -->
        <a href="/" class="flex items-center gap-3">
            <img src="{% static 'images/amway_logo.png' %}" class="h-9">
            <span class="text-xl font-semibold text-blue-900 dark:text-white">Amway Contribute</span>
        </a>

        <div class="flex items-center gap-6">

            <!-- Desktop Search -->
            <form action="/search/" method="get"
                  class="hidden md:flex items-center bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-xl gap-2 w-72">
                <i class="fa fa-search text-gray-500 dark:text-gray-300"></i>
                <input type="text" name="q" placeholder="Search..."
                       class="bg-transparent w-full outline-none text-sm dark:text-gray-200">
            </form>

            <!-- Desktop Nav -->
            <nav class="hidden md:flex gap-8 text-gray-700 dark:text-gray-300">
                <a href="/">Home</a>
                <a href="/products">Products</a>
                <a href="/about">About</a>
            </nav>

            <!-- Dark Mode -->
            <div id="themeToggle" class="switch"></div>

            <!-- Mobile Menu Button -->
            <button id="menuBtn" class="md:hidden text-3xl">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobileMenu"
         class="hidden flex-col gap-5 p-6 bg-white/40 dark:bg-gray-800/40 backdrop-blur-xl 
                rounded-b-3xl shadow-xl md:hidden animate-slideDown">

        <form action="/search/" method="get"
              class="flex items-center bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-xl gap-3">
            <i class="fa fa-search"></i>
            <input type="text" name="q" class="bg-transparent outline-none w-full" placeholder="Search...">
        </form>

        <a href="/" class="flex items-center gap-3 text-lg"><i class="fa-solid fa-house"></i>Home</a>
        <a href="/products" class="flex items-center gap-3 text-lg"><i class="fa-solid fa-box"></i>Products</a>
        <a href="/about" class="flex items-center gap-3 text-lg"><i class="fa-solid fa-circle-info"></i>About</a>
        <a href="/contact" class="flex items-center gap-3 text-lg"><i class="fa-solid fa-envelope"></i>Contact</a>
    </div>
</header>

<script>
// SINGLE clean script for dark mode + mobile menu

document.addEventListener("DOMContentLoaded", () => {

    const html = document.documentElement;
    const toggle = document.getElementById("themeToggle");
    const menuBtn = document.getElementById("menuBtn");
    const mobileMenu = document.getElementById("mobileMenu");

    // Load initial theme
    const saved = localStorage.getItem("theme");
    if (saved === "dark") {
        html.classList.add("dark");
        toggle.classList.add("dark-mode");
    }

    // Toggle theme
    toggle.addEventListener("click", () => {
        const isDark = html.classList.toggle("dark");
        toggle.classList.toggle("dark-mode");
        localStorage.setItem("theme", isDark ? "dark" : "light");
    });

    // Mobile menu toggle
    menuBtn.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
    });

});
</script>

<!-- MAIN -->
<div class="px-4 md:px-10 py-5">
    {% block content %}{% endblock %}
</div>

<!-- FOOTER — unchanged -->
<footer class="mt-14 bg-white dark:bg-gray-900 border-t border-gray-300 dark:border-gray-700 pt-10 pb-6">
    <div class="max-w-[1200px] mx-auto px-5">
        ...
    </div>
</footer>

</body>
</html>
